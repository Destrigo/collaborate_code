{"ast":null,"code":"import _objectSpread from\"/home/marco/workstation/stormbrainer/frontend_lvb_stormbrainer/stormbrainer/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// StormBrainer API Service\nconst API_BASE_URL='https://stormbrainer-galaxy.onrender.com/api';/**\n * Helper function to create fetch requests with JWT authentication.\n */const apiFetch=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=localStorage.getItem('token');const defaultHeaders=_objectSpread({'Content-Type':'application/json'},options.headers);if(token){defaultHeaders['Authorization']=\"Bearer \".concat(token);}const response=await fetch(\"\".concat(API_BASE_URL).concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers:defaultHeaders}));if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.message||\"API Error: \".concat(response.statusText));}if(response.status===204){return null;}return response.json();};// --- Authentication ---\nexport const login=async(email,password)=>{const response=await apiFetch('/auth/login',{method:'POST',body:JSON.stringify({email,password})});if(response.token){localStorage.setItem('token',response.token);}return response;// { user, token }\n};export const register=async(username,email,password)=>{const response=await apiFetch('/auth/register',{method:'POST',body:JSON.stringify({username,email,password})});if(response.token){localStorage.setItem('token',response.token);}return response;// { user, token }\n};export const getCurrentUser=async()=>{return apiFetch('/auth/me');};// --- Galaxies ---\nexport const getGalaxies=async function(){let filter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'public';return apiFetch(\"/galaxies?filter=\".concat(filter));};export const createGalaxy=async _ref=>{let{name,description,category,is_public,password}=_ref;return apiFetch('/galaxies',{method:'POST',body:JSON.stringify({name,description,category,is_public,password})});};export const joinGalaxy=async function(galaxyId){let password=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return apiFetch(\"/galaxies/\".concat(galaxyId,\"/join\"),{method:'POST',body:JSON.stringify({password})});};// --- Problems ---\nexport const getProblems=galaxyId=>{return apiFetch(\"/galaxies/\".concat(galaxyId,\"/problems\"));};export const createProblem=(galaxyId,title,description)=>{return apiFetch(\"/galaxies/\".concat(galaxyId,\"/problems\"),{method:'POST',body:JSON.stringify({title,description})});};// --- Solutions ---\nexport const getSolutions=problemId=>{return apiFetch(\"/problems/\".concat(problemId,\"/solutions\"));};export const createSolution=(problemId,text)=>{return apiFetch(\"/problems/\".concat(problemId,\"/solutions\"),{method:'POST',body:JSON.stringify({text})});};export const rateSolution=(solutionId,value)=>{return apiFetch(\"/solutions/\".concat(solutionId,\"/rate\"),{method:'POST',body:JSON.stringify({value})});};// --- Leaderboard ---\nexport const getLeaderboardData=()=>{return apiFetch('/leaderboard');};// --- Categories (mock) ---\nexport const getCategories=()=>{return['Math','Logic','Programming','Riddles','General'];};// ============================================\n// USER STATS API (ADD THESE)\n// ============================================\n// Get user statistics\nexport const getUserStats=async userId=>{try{const token=localStorage.getItem('token');const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\").concat(userId,\"/stats\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Failed to fetch user stats');}return await response.json();}catch(error){console.error('Get user stats error:',error);throw error;}};// Update user profile\nexport const updateUserProfile=async(userId,updates)=>{try{const token=localStorage.getItem('token');const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\").concat(userId),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(updates)});if(!response.ok){const error=await response.json();throw new Error(error.message||'Failed to update profile');}return await response.json();}catch(error){console.error('Update profile error:',error);throw error;}};// Get user achievements\nexport const getUserAchievements=async userId=>{try{const token=localStorage.getItem('token');const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\").concat(userId,\"/achievements\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Failed to fetch achievements');}return await response.json();}catch(error){console.error('Get achievements error:',error);throw error;}};","map":{"version":3,"names":["API_BASE_URL","apiFetch","endpoint","options","arguments","length","undefined","token","localStorage","getItem","defaultHeaders","_objectSpread","headers","concat","response","fetch","ok","errorData","json","catch","Error","message","statusText","status","login","email","password","method","body","JSON","stringify","setItem","register","username","getCurrentUser","getGalaxies","filter","createGalaxy","_ref","name","description","category","is_public","joinGalaxy","galaxyId","getProblems","createProblem","title","getSolutions","problemId","createSolution","text","rateSolution","solutionId","value","getLeaderboardData","getCategories","getUserStats","userId","error","console","updateUserProfile","updates","getUserAchievements"],"sources":["/home/marco/workstation/stormbrainer/frontend_lvb_stormbrainer/stormbrainer/frontend/src/services/api.js"],"sourcesContent":["// StormBrainer API Service\nconst API_BASE_URL = 'https://stormbrainer-galaxy.onrender.com/api';\n\n/**\n * Helper function to create fetch requests with JWT authentication.\n */\nconst apiFetch = async (endpoint, options = {}) => {\n    const token = localStorage.getItem('token');\n    \n    const defaultHeaders = {\n        'Content-Type': 'application/json',\n        ...options.headers,\n    };\n    \n    if (token) {\n        defaultHeaders['Authorization'] = `Bearer ${token}`;\n    }\n\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n        ...options,\n        headers: defaultHeaders,\n    });\n\n    if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `API Error: ${response.statusText}`);\n    }\n\n    if (response.status === 204) {\n        return null;\n    }\n\n    return response.json();\n};\n\n// --- Authentication ---\n\nexport const login = async (email, password) => {\n    const response = await apiFetch('/auth/login', {\n        method: 'POST',\n        body: JSON.stringify({ email, password }),\n    });\n    if (response.token) {\n        localStorage.setItem('token', response.token);\n    }\n    return response; // { user, token }\n};\n\nexport const register = async (username, email, password) => {\n    const response = await apiFetch('/auth/register', {\n        method: 'POST',\n        body: JSON.stringify({ username, email, password }),\n    });\n    if (response.token) {\n        localStorage.setItem('token', response.token);\n    }\n    return response; // { user, token }\n};\n\nexport const getCurrentUser = async () => {\n    return apiFetch('/auth/me');\n};\n\n// --- Galaxies ---\n\nexport const getGalaxies = async (filter = 'public') => {\n    return apiFetch(`/galaxies?filter=${filter}`);\n};\n\nexport const createGalaxy = async ({ name, description, category, is_public, password }) => {\n    return apiFetch('/galaxies', {\n        method: 'POST',\n        body: JSON.stringify({ name, description, category, is_public, password }),\n    });\n};\n\nexport const joinGalaxy = async (galaxyId, password = null) => {\n    return apiFetch(`/galaxies/${galaxyId}/join`, {\n        method: 'POST',\n        body: JSON.stringify({ password }),\n    });\n};\n\n// --- Problems ---\n\nexport const getProblems = (galaxyId) => {\n    return apiFetch(`/galaxies/${galaxyId}/problems`);\n};\n\nexport const createProblem = (galaxyId, title, description) => {\n    return apiFetch(`/galaxies/${galaxyId}/problems`, {\n        method: 'POST',\n        body: JSON.stringify({ title, description }),\n    });\n};\n\n// --- Solutions ---\n\nexport const getSolutions = (problemId) => {\n    return apiFetch(`/problems/${problemId}/solutions`);\n};\n\nexport const createSolution = (problemId, text) => {\n    return apiFetch(`/problems/${problemId}/solutions`, {\n        method: 'POST',\n        body: JSON.stringify({ text }),\n    });\n};\n\nexport const rateSolution = (solutionId, value) => {\n    return apiFetch(`/solutions/${solutionId}/rate`, {\n        method: 'POST',\n        body: JSON.stringify({ value }),\n    });\n};\n\n// --- Leaderboard ---\n\nexport const getLeaderboardData = () => {\n    return apiFetch('/leaderboard');\n};\n\n// --- Categories (mock) ---\n\nexport const getCategories = () => {\n    return ['Math', 'Logic', 'Programming', 'Riddles', 'General'];\n};\n\n// ============================================\n// USER STATS API (ADD THESE)\n// ============================================\n\n// Get user statistics\nexport const getUserStats = async (userId) => {\n    try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`${API_BASE_URL}/users/${userId}/stats`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch user stats');\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error('Get user stats error:', error);\n        throw error;\n    }\n};\n\n// Update user profile\nexport const updateUserProfile = async (userId, updates) => {\n    try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n            },\n            body: JSON.stringify(updates),\n        });\n\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.message || 'Failed to update profile');\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error('Update profile error:', error);\n        throw error;\n    }\n};\n\n// Get user achievements\nexport const getUserAchievements = async (userId) => {\n    try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`${API_BASE_URL}/users/${userId}/achievements`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch achievements');\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error('Get achievements error:', error);\n        throw error;\n    }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}