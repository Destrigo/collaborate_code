{"ast":null,"code":"// frontend/src/hooks/useGalaxy.js\nimport{useState,useEffect,useCallback}from'react';import{getGalaxies,createGalaxy,joinGalaxy}from'../services/api';/**\n * @description Hook for managing galaxy list, filtering, creation, and joining.\n */export const useGalaxy=()=>{const[galaxies,setGalaxies]=useState([]);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[filter,setFilter]=useState('public');// 'public' or 'joined'\nconst fetchGalaxies=useCallback(async function(){let currentFilter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:filter;setIsLoading(true);setError(null);try{const list=await getGalaxies(currentFilter);setGalaxies(list);}catch(err){setError(err.message||'Failed to load galaxies.');console.error(err);}finally{setIsLoading(false);}},[filter]);useEffect(()=>{fetchGalaxies();},[fetchGalaxies]);const handleCreateGalaxy=async galaxyData=>{setError(null);try{const newGalaxy=await createGalaxy(galaxyData);// Add the new galaxy to the list and switch to joined filter if applicable\nsetGalaxies(prev=>[...prev,newGalaxy]);return newGalaxy;}catch(err){setError(err.message||'Failed to create galaxy.');throw err;}};const handleJoinGalaxy=async(galaxyId,password)=>{setError(null);try{await joinGalaxy(galaxyId,password);// Refresh list to update 'is_member' status\nawait fetchGalaxies();}catch(err){setError(err.message||'Failed to join galaxy.');throw err;}};const setFilterAndFetch=newFilter=>{setFilter(newFilter);fetchGalaxies(newFilter);};return{galaxies,isLoading,error,filter,setFilter:setFilterAndFetch,createGalaxy:handleCreateGalaxy,joinGalaxy:handleJoinGalaxy,refreshGalaxies:fetchGalaxies};};","map":{"version":3,"names":["useState","useEffect","useCallback","getGalaxies","createGalaxy","joinGalaxy","useGalaxy","galaxies","setGalaxies","isLoading","setIsLoading","error","setError","filter","setFilter","fetchGalaxies","currentFilter","arguments","length","undefined","list","err","message","console","handleCreateGalaxy","galaxyData","newGalaxy","prev","handleJoinGalaxy","galaxyId","password","setFilterAndFetch","newFilter","refreshGalaxies"],"sources":["/home/marco/workstation/stormbrainer/frontend_lvb_stormbrainer/stormbrainer/frontend/src/hooks/useGalaxy.js"],"sourcesContent":["// frontend/src/hooks/useGalaxy.js\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { getGalaxies, createGalaxy, joinGalaxy } from '../services/api';\n\n/**\n * @description Hook for managing galaxy list, filtering, creation, and joining.\n */\nexport const useGalaxy = () => {\n    const [galaxies, setGalaxies] = useState([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [filter, setFilter] = useState('public'); // 'public' or 'joined'\n\n    const fetchGalaxies = useCallback(async (currentFilter = filter) => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const list = await getGalaxies(currentFilter);\n            setGalaxies(list);\n        } catch (err) {\n            setError(err.message || 'Failed to load galaxies.');\n            console.error(err);\n        } finally {\n            setIsLoading(false);\n        }\n    }, [filter]);\n\n    useEffect(() => {\n        fetchGalaxies();\n    }, [fetchGalaxies]);\n\n    const handleCreateGalaxy = async (galaxyData) => {\n        setError(null);\n        try {\n            const newGalaxy = await createGalaxy(galaxyData);\n            // Add the new galaxy to the list and switch to joined filter if applicable\n            setGalaxies(prev => [...prev, newGalaxy]); \n            return newGalaxy;\n        } catch (err) {\n            setError(err.message || 'Failed to create galaxy.');\n            throw err;\n        }\n    };\n\n    const handleJoinGalaxy = async (galaxyId, password) => {\n        setError(null);\n        try {\n            await joinGalaxy(galaxyId, password);\n            // Refresh list to update 'is_member' status\n            await fetchGalaxies(); \n        } catch (err) {\n            setError(err.message || 'Failed to join galaxy.');\n            throw err;\n        }\n    };\n\n    const setFilterAndFetch = (newFilter) => {\n        setFilter(newFilter);\n        fetchGalaxies(newFilter);\n    };\n\n    return {\n        galaxies,\n        isLoading,\n        error,\n        filter,\n        setFilter: setFilterAndFetch,\n        createGalaxy: handleCreateGalaxy,\n        joinGalaxy: handleJoinGalaxy,\n        refreshGalaxies: fetchGalaxies,\n    };\n};"],"mappings":"AAAA;AAEA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACxD,OAASC,WAAW,CAAEC,YAAY,CAAEC,UAAU,KAAQ,iBAAiB,CAEvE;AACA;AACA,GACA,MAAO,MAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,QAAQ,CAAC,CAAE;AAEhD,KAAM,CAAAe,aAAa,CAAGb,WAAW,CAAC,gBAAkC,IAA3B,CAAAc,aAAa,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGJ,MAAM,CAC3DH,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACA,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAAjB,WAAW,CAACa,aAAa,CAAC,CAC7CR,WAAW,CAACY,IAAI,CAAC,CACrB,CAAE,MAAOC,GAAG,CAAE,CACVT,QAAQ,CAACS,GAAG,CAACC,OAAO,EAAI,0BAA0B,CAAC,CACnDC,OAAO,CAACZ,KAAK,CAACU,GAAG,CAAC,CACtB,CAAC,OAAS,CACNX,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAAE,CAACG,MAAM,CAAC,CAAC,CAEZZ,SAAS,CAAC,IAAM,CACZc,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACA,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAS,kBAAkB,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC7Cb,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACA,KAAM,CAAAc,SAAS,CAAG,KAAM,CAAAtB,YAAY,CAACqB,UAAU,CAAC,CAChD;AACAjB,WAAW,CAACmB,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAED,SAAS,CAAC,CAAC,CACzC,MAAO,CAAAA,SAAS,CACpB,CAAE,MAAOL,GAAG,CAAE,CACVT,QAAQ,CAACS,GAAG,CAACC,OAAO,EAAI,0BAA0B,CAAC,CACnD,KAAM,CAAAD,GAAG,CACb,CACJ,CAAC,CAED,KAAM,CAAAO,gBAAgB,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,QAAQ,GAAK,CACnDlB,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACA,KAAM,CAAAP,UAAU,CAACwB,QAAQ,CAAEC,QAAQ,CAAC,CACpC;AACA,KAAM,CAAAf,aAAa,CAAC,CAAC,CACzB,CAAE,MAAOM,GAAG,CAAE,CACVT,QAAQ,CAACS,GAAG,CAACC,OAAO,EAAI,wBAAwB,CAAC,CACjD,KAAM,CAAAD,GAAG,CACb,CACJ,CAAC,CAED,KAAM,CAAAU,iBAAiB,CAAIC,SAAS,EAAK,CACrClB,SAAS,CAACkB,SAAS,CAAC,CACpBjB,aAAa,CAACiB,SAAS,CAAC,CAC5B,CAAC,CAED,MAAO,CACHzB,QAAQ,CACRE,SAAS,CACTE,KAAK,CACLE,MAAM,CACNC,SAAS,CAAEiB,iBAAiB,CAC5B3B,YAAY,CAAEoB,kBAAkB,CAChCnB,UAAU,CAAEuB,gBAAgB,CAC5BK,eAAe,CAAElB,aACrB,CAAC,CACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}